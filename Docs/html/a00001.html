<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bing Maps iOS Control: Getting Started with the Bing Maps iOS Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Getting Started with the Bing Maps iOS Control </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="one"></a>
Include the Library in Your Xcode Project</h2>
<p>You can find the Bing Maps iOS Control (as a universal static library) plus the required resources bundle and header files in the <em>MapControl</em> folder of your SDK installation.</p>
<ul>
<li>Right-click on the project file and choose <b><b></b> Add Files to "&lt;Project&gt;"...</b>. Navigate to the <em>MapControl</em> folder, and select all items. Click <b>Add</b>.</li>
</ul>
<div align="center">
<img src="addexistingfiles.png" alt="addexistingfiles.png"/>
</div>
<ul>
<li>Left-click on the project file and click on the <b><b></b> Build Settings </b> tab.</li>
</ul>
<ul>
<li>Set the value of the <b>Header Search Paths</b> environment variable to the path to your <em>MapControl</em> directory (for example, <code>/Users/{username}/Documents/BingMapsiOS/MapControl/</code>).</li>
</ul>
<p><b>Note:</b> If there are any spaces in the path, be sure to enclose the entire path with double quotes (").</p>
<h2><a class="anchor" id="two"></a>
Add Linker Flags</h2>
<ul>
<li>Left-click on the project file and click on the <b><b></b> Build Settings </b> tab.</li>
</ul>
<ul>
<li>Set the value of the <b>Other Linker Flags</b> environment variable to <code>-ObjC -all_load</code>.</li>
</ul>
<div align="center">
<img src="addlinkerflags.png" alt="addlinkerflags.png"/>
</div>
<h2><a class="anchor" id="three"></a>
Add Required Frameworks</h2>
<ul>
<li>Left-click on the project file. Select the target of your project and select the <b><b></b> Build Phases </b> tab.</li>
</ul>
<ul>
<li>Click to expand the <b>Link Binary With Libraries</b> item and click the [+] on the bottom to add frameworks. Select the following frameworks:</li>
</ul>
<ul>
<li>CoreData.framework</li>
<li>CoreLocation.framework</li>
<li>OpenGLES.framework</li>
<li>QuartzCore.framework</li>
<li>SystemConfiguration.framework</li>
<li>libxml2.dylib</li>
<li>libz.dylib</li>
</ul>
<div align="center">
<img src="addframeworks.png" alt="addframeworks.png"/>
</div>
<h2><a class="anchor" id="four"></a>
Inserting the Map Control in a NIB File</h2>
<ul>
<li>Open up the NIB file (.xib) where you want to insert the map in <b>Interface Builder</b>. From the <b>Library</b> palette, select the Objects tab and drag the <em>UIView</em> control to the space where you want the map to appear.</li>
</ul>
<div align="center">
<img src="insertmapcontrolinanib.png" alt="insertmapcontrolinanib.png"/>
</div>
<ul>
<li>With the <em>UIView</em> control selected, tick the <b>Multiple Touch</b> checkbox within the <b>Interaction</b> section of the <b>Inspector</b> palette.</li>
</ul>
<ul>
<li>Click on the <b>Identity</b> tab of the <b>Inspector</b> palette. For the <b>Class</b> item, type in <code><a class="el" href="a00008.html" title="BMMapView is the core class for embedding a map into an iOS app.">BMMapView</a></code>.</li>
</ul>
<ul>
<li>Save the file in <b>Interface Builder</b>.</li>
</ul>
<h2><a class="anchor" id="five"></a>
Implementing the BMMapView Delegate in UIViewController</h2>
<ul>
<li>Within your View Controller header file, import <a class="el" href="a00016_source.html">BingMaps/BingMaps.h</a>.</li>
</ul>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#import &quot;BingMaps/BingMaps.h&quot;</span>
</pre></div><ul>
<li>Declare the ViewController to be implementing <a class="el" href="a00009.html" title="The BMMapViewDelegate protocol methods can notify you of changes related to the map.">BMMapViewDelegate</a>. Also declare a <a class="el" href="a00008.html" title="BMMapView is the core class for embedding a map into an iOS app.">BMMapView</a> <em>IBOutlet</em> member as shown below:</li>
</ul>
<div class="fragment"><pre class="fragment"><span class="keyword">@interface </span>LocationMapViewController : UIViewController &lt;<a class="code" href="a00009.html" title="The BMMapViewDelegate protocol methods can notify you of changes related to the map.">BMMapViewDelegate</a>&gt; {
    IBOutlet <a class="code" href="a00008.html" title="BMMapView is the core class for embedding a map into an iOS app.">BMMapView</a>* mapView;
}
<span class="keyword">@end</span>
</pre></div><ul>
<li>Go to the ViewController class file and add the following code in the <em>viewDidLoad:</em> method.</li>
</ul>
<div class="fragment"><pre class="fragment">- (void)viewDidLoad {
    [super viewDidLoad];
    [mapView setDelegate:<span class="keyword">self</span>];
    
    <span class="comment">// If you want to show user location...</span>
    [mapView setShowsUserLocation:YES];
}
</pre></div><ul>
<li>Save and build your project.</li>
</ul>
<ul>
<li>Open up the NIB file (.xib) where you want to insert the map in Interface Builder. Ctrl + drag from the <b>File's Owner</b> item in the <b>Document</b> window to the <a class="el" href="a00008.html" title="BMMapView is the core class for embedding a map into an iOS app.">BMMapView</a> you created earlier and select <em>mapView</em> in the <b>Outlets</b> pop-up.</li>
</ul>
<div align="center">
<img src="implementing.png" alt="implementing.png"/>
</div>
<ul>
<li>Save the file in <b>Interface Builder</b>.</li>
</ul>
<h2><a class="anchor" id="addingyourbingmapskey"></a>
Adding Your Bing Maps Key</h2>
<p>To use the Bing Maps iOS Control, you need to have a Bing Maps Key to use in your app.</p>
<p>Bing Maps Keys can be requested from the Bing Maps Account Center (<a href="http://www.bingmapsportal.com">http://www.bingmapsportal.com</a>). More information is available at <a href="http://msdn.microsoft.com/en-us/library/ff428642.aspx">http://msdn.microsoft.com/en-us/library/ff428642.aspx</a></p>
<p>Once you have a Bing Maps Key, follow the steps below to add it to your app project's main property list, named <em>{appname}_Info.plist</em></p>
<ul>
<li>In the property list, click the [+] at the bottom-right to add a new row. The key should be specified as <em>BingMapsKey</em> and the value should be your Bing Maps Key.</li>
</ul>
<div align="center">
<img src="addingkey.png" alt="addingkey.png"/>
</div>
<h2><a class="anchor" id="sessioncounting"></a>
Session Counting</h2>
<p>When the Bing Maps iOS Control is loaded with a valid Bing Maps Key, Bing Maps counts sessions. A session begins with the load of the first Bing Maps iOS Control which appears in an app and includes all map control interactions until the app is terminated. Information about Bing Maps usage reports is found in the <a href="http://msdn.microsoft.com/en-us/library/ff859477.aspx" target="_blank">Viewing Bing Maps Usage Reports</a> topic. </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue May 3 2011 11:57:16 for Bing Maps iOS Control by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
